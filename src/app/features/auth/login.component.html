<div style="max-width: 900px; margin: 50px auto; padding: 20px;">
  <h1>Login</h1>

  <div style="max-width: 400px; margin: 20px auto;">
    <button
      (click)="login()"
      style="width: 100%; padding: 10px; margin-bottom: 10px; cursor: pointer; background-color: #007bff; color: white; border: none; font-size: 16px;">
      Login com Keycloak
    </button>

    <button
      (click)="loginWithGoogle()"
      style="width: 100%; padding: 10px; cursor: pointer; background-color: #dc3545; color: white; border: none; font-size: 16px;">
      Login com Google
    </button>
  </div>

  <app-flow-explanation title="Fluxo: Login com Keycloak" [defaultOpen]="true">
    <p style="margin-bottom: 10px;"><strong>Como funciona o login padrao:</strong></p>
    <ol style="margin: 10px 0; padding-left: 20px;">
      <li>Voce clica no botao azul acima</li>
      <li>E redirecionado para a tela de login do Keycloak</li>
      <li>Insere usuario e senha (ex: admin / admin123)</li>
      <li>Keycloak valida e gera um codigo de autorizacao</li>
      <li>Voce retorna para a aplicacao com o codigo</li>
      <li>Angular troca o codigo por tokens (access + refresh)</li>
      <li>Tokens ficam em memoria (nao em cookies/localStorage)</li>
    </ol>
    <app-mermaid-diagram [diagram]="loginFlowDiagram"></app-mermaid-diagram>
  </app-flow-explanation>

  <app-flow-explanation title="Fluxo: Login com Google (Federacao)">
    <p style="margin-bottom: 10px;"><strong>Como funciona o login social:</strong></p>
    <ol style="margin: 10px 0; padding-left: 20px;">
      <li>Voce clica no botao vermelho acima</li>
      <li>Angular pede ao Keycloak para usar Google (idpHint)</li>
      <li>Keycloak redireciona para pagina de login do Google</li>
      <li>Voce autentica com sua conta Google</li>
      <li>Google envia token para Keycloak</li>
      <li>Keycloak cria/atualiza seu usuario automaticamente</li>
      <li>Keycloak gera tokens proprios e retorna para Angular</li>
    </ol>
    <p style="margin-top: 10px; padding: 10px; background-color: #fff3cd; border-left: 4px solid #ffc107;">
      <strong>Nota:</strong> Requer configuracao de Identity Provider Google no Keycloak
    </p>
    <app-mermaid-diagram [diagram]="googleFlowDiagram"></app-mermaid-diagram>
  </app-flow-explanation>
</div>
